<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DictionWave</title>
    <style>
        body {
            margin: 20px;
            background-color: rgb(31, 31, 31);
            color: rgb(198, 198, 198);
        }

        h1 {
            margin: 0;
            display: inline;
        }

        .header {
            display: flex;
            align-items: center;
        }

        a {
            color: rgb(198, 198, 198);
            text-decoration: none;
        }

        .search-container {
            display: flex;
            align-items: center;
            margin-left: 20px;
        }

        .input-container {
            display: flex;
            align-items: center;
            margin-top: 10px;
        }

        .input-container label {
            margin-right: 5px;
        }

        .input-container input {
            width: 50px;
            margin-left: 5px;
            margin-right: 10px;
        }

        .results {
            display: flex;
            justify-content: space-between;
        }

        .column {
            width: 45%;
        }

        .word {
            display: inline;
            margin: 0 5px;
            cursor: pointer;
            text-decoration: none;
            color: rgb(198, 198, 198);
        }

        .welcome {
            margin-top: 40px;
            margin-left: 160px;
            margin-right: 160px;
        }

        .example {
            margin: 40px 60px;
        }
    </style>
</head>

<body>
    <div class="header">
        <h1><a href="{{ url_for('index') }}">DictionWave</a></h1>
        <div class="search-container">
            <form method="post">
                <input type="text" name="word" placeholder="Enter a word" {% if last_word %} value="{{ last_word }}" {%
                    endif %} required>
                <button type="submit">Explore</button>
                <div class="input-container">
                    <label for="num_words">Output Size:</label>
                    <input type="number" id="num_words" name="num_words" placeholder="N" min="1"
                        value="{{ request.form.num_words or 80 }}" required>

                    <label for="rarity_boost">Rarity Boost:</label>
                    <input type="number" id="rarity_boost" name="rarity_boost" placeholder="R" step="1.0"
                        value="{{ request.form.rarity_boost or 5.0 }}" required>

                    <label for="randomness">Randomness:</label>
                    <input type="number" id="randomness" name="randomness" placeholder="Rand" min="0" step="1.0"
                        value="{{ request.form.randomness or 0.0 }}" required>
                </div>
            </form>
        </div>
    </div>

    <div class="results">
        <div class="column">
            {% if similar_words %}
            <h2>Similar Words:</h2>
            <div>
                {% for word in similar_words %}
                <span class="word" onclick="submitWord('{{ word }}')">{{ word }}</span>
                {% endfor %}
            </div>
            {% endif %}
        </div>

        <div class="column">
            {% if similar_words_boosted %}
            <h2>Rarity Boosted Words:</h2>
            <div>
                {% for word in similar_words_boosted %}
                <span class="word" onclick="submitWord('{{ word }}')">{{ word }}</span>
                {% endfor %}
            </div>
            {% endif %}
        </div>
    </div>

    {% if example_words %}
    <div>
        <div class="welcome">
            <h2>Welcome!</h2>
            <p>
                DictionWave lets you explore the English language using the power of word embeddings. Here are a few
                ideas
                to get you started - just click a word to begin your journey.
            </p>
            <div class="example">
                {% for word in example_words %}
                <span class="word" onclick="submitWord('{{ word }}')">{{ word }}</span>
                {% endfor %}
            </div>
            <p>
                This is an open-source project licensed under the MIT License. Its GitHub repository can be found
                <u><a href="https://github.com/jhelsby/DictionWave">here</a></u>, along with further details on how it
                works. Many thanks for visiting!
            </p>
        </div>
    </div>
    {% endif %}

    <script>
        function submitWord(word) {
            const form = document.createElement('form');
            form.method = 'POST';
            form.action = '/';

            const inputWord = document.createElement('input');
            inputWord.type = 'hidden';
            inputWord.name = 'word';
            inputWord.value = word;

            const inputNumWords = document.getElementById('num_words').value;
            const inputRarityBoost = document.getElementById('rarity_boost').value;
            const inputRandomness = document.getElementById('randomness').value;

            const inputNumWordsField = document.createElement('input');
            inputNumWordsField.type = 'hidden';
            inputNumWordsField.name = 'num_words';
            inputNumWordsField.value = inputNumWords;

            const inputRarityBoostField = document.createElement('input');
            inputRarityBoostField.type = 'hidden';
            inputRarityBoostField.name = 'rarity_boost';
            inputRarityBoostField.value = inputRarityBoost;

            const inputRandomnessField = document.createElement('input');
            inputRandomnessField.type = 'hidden';
            inputRandomnessField.name = 'randomness';
            inputRandomnessField.value = inputRandomness;

            form.appendChild(inputWord);
            form.appendChild(inputNumWordsField);
            form.appendChild(inputRarityBoostField);
            form.appendChild(inputRandomnessField);

            document.body.appendChild(form);
            form.submit();
        }
    </script>
</body>

</html>